# 클라우드 

### 클라우드의 역사

* 클라우드는 인터넷 공중망을 표기하는 도식으로 사용하던 구름 모양에서 유래되었습니다. 

  ![](https://t1.daumcdn.net/cfile/tistory/2765C85052AAB7851B)

* ARPANET과 CSNET(1981년 ARPANET에 접속할 수 없는 교육기관에서 사용)에서 처음 사용되었습니다. 

* 클라우드 개념을 저음 제시했던 사람은 존 메카시(1927~2011)로 '컴퓨팅 환경이 공공시설을 쓰는 것과도 같을 것' 이라고 말한 것이 시점으로  2006년 구글 직원이자 오픈소스 빅데이터 업체인 클라우데라 설립자인 그리스토프 비시글리아가 개념을 확립했습니다. 

* 1995년 Ceneral Magic 이라는 회사가 통신사와 제휴를 통해서 클라우드 서비스를 시작했으나 기술, 환경, 인식이 성숙하지 않은 시점이었기 때문에 성공하지는 못했습니다. 

* 그리스토프 비시글리아는 구글의 자원과 기술력을 사용할 수 있었기 때문에 개념을 정의하고 실행하였으며, 2006년 아마존닷컴이 AWS(Amazon Web Service) 서비스로 성공하면서 클라우드 서비스에 대한 관심도가 급격하게 증가하였습니다. 

  ![](https://cdn-images-1.medium.com/max/1600/1*AD9ZSLXKAhZ-_WomszsmPg.png)



### 클라우드의 정의 

* 접근성 

  * 클라우드에서 가장 중요한 것으로 서비스에 접근하고 사용하기 편리해야 합니다. 
  * 따라서 인터넷 기반 환경에서 가장 접근성이 높은 웹 애플리케이션 방식을 대부분 채택하고 있습니다. 

* 확장성 보장 

  * 클라우드 사업자는 글로벌 데이터 센터에서 수많은 인프라 리소스가 서로 연결되어 사용자 위치에 구애 받지 않고 사용자가 원하는 만큼 무제한의 컴퓨팅 용량을 언제 어디서나 제공해야 합니다. 

* 사용량의 측정과 비용부과 

  * 유틸리티 컴퓨팅이라고 부르는 개념으로 사용한만큼 비용을 지불합니다. 
  * 부과 방식은 클라우드 서비스 제공자와 계약을 어떻게 하느냐에 따라 달라질 수 있습니다. (월 정액제, 용량 초과 사용시 누진 적용 등)

  > 클라우드의 정의는 사용하는 사람에 따라 달라지기 때문에 정확한 정의를 하기란 어려운 측면이 있습니다. 본 내용은 위키피디아, IBM, 포레스트 리서치 등 글로벌 컨설팅 회사와 사전에 나온 내용으로 재구성하였습니다. 



### 클라우드 서비스 

* Storage as a Service 
  * 가장 기본적인 클라우드 서비스 유형으로 인터넷 기반 저장 장치로 할 수 있습니다. 
  * 대표적인 서비스로 iCloud, 네이버 클라우드, Dropbox, onedrive가 있습니다. 
  * 서비스를 사용할 때 가장 중요하게 고민해야 하는 점은 안전성입니다. 
    * KT ucloud와 같이 갑작스럽게 서비스 종료가 된다면 개인 자료를 모두 손실될 수 있습니다. 
    * 서비스 제공자의 보안 정책에 따라 개인 정보 유출과 같은 가능성이 있기 때문에 유의해야 합니다. 

![](https://mycloudblog7.files.wordpress.com/2013/06/screen-shot-2015-06-09-at-2-13-05-pm1.png)

* IaaS
  * 네트워크, 서버, 스토리지, OS까지 인프라 영역을 서비스 형태로 제공하는 것을 의미합니다. 
  * 고객은 필요한 스펙을 골라서 비용을 지불하고 사용합니다.
  * 대표적인 서비스로는 AWS EC2, IBM Softlayer, SK주식회사 C&C의 CloudZ, Rockspace에서 주도하는 OpenStack이 있습니다. 
* PaaS
  * 인프라 담당자 없이 서비스를 직접 운영할 수 있도록 해 주는 것으로 인프라가 없어도 된다는 장점이 있으나 인프라 엔지니어의 개입이 불필요한 아키텍쳐만 가능하다는 단점이 있습니다. 
  * 보통은 자바 혹은 자바스크립트 기반의 소프트웨어만 가능합니다. 
  * AWS Elastic Beanstalk, Windows Azure, Heroku, Force.com, Google App Engine, Apache Stratos, OpenShift 등이 있습니다. 
* SaaS
  * 업무 담당자 관점의 클라우드 서비스로서 사용자 환경에 최적화된 소프트웨어를 제공하는 것을 목표로 합니다. 
  * 업무 담당자는 선택한 기능으로 구성된 소프트웨어를 사용하며, 사용한 기능에 대한 비용만을 지불하여 사용합니다. 
  * 단, 기존 레거시 시스템과의 통합을 위한 인터페이스 개발을 지원하지 않기 때문에 SaaS로 전환하기 위해서는 시스템을 한 번에 전환하는 빅뱅 방식의 전환을 해야 하는 단점이 있습니다. 
  * 따라서 기존 레거시 환경이 크면 전환하기가 어렵습니다. 



### IaaS 특성 

* On-demand Self Service

  * 인프라 담당자가 필요한 시점에 즉시, 언제나 서버와 네트워크, 스토리지와 같은 인프라 자원을 만들 수 있는  특성을 가지고 있습니다. 

* 리소스 폴링 

  * 스토리지, 프로세서, 메모리, 네트워크 등의 인프라 자원(리소스)들을 분할하여 풀을 만들고, 시스템 성능 목표를 충족할 수 있는 양만큼 사용할 수 있습니다. 

* 민첩한 탄력성(rapid elasticity)

  * 오토 스케일링이라고 표현하는 이러한 특성은 평상시 트래픽을 기준으로 자원을 할당하여 사용하다가 임계치 이상의 트래픽이 폭주했을 때 인프라 자원을 추가 할당하며, 이와 반대로 임계치 밑으로 일정 시간 이상의 트래픽이 유지되면 불필요한 자원을 정리하여 트래픽에 기민하게 대응할 수 있도록 합니다. 

    ![](http://www.mgt-commerce.com/blog/wp-content/uploads/2013/12/asg-create-autoscaling-group.png)

* 사용량 측정

  * 모니터링을 통해서 시간 단위로 변하는 사용량에 대한 정확한 비용 청구, 클라우드 자원에 대한 유지/보수/증설 계획 수립을 위한 표본 데이터를 추출하고, 트래픽에 따른 인프라 자원의 할당과 회수를 가능하게 합니다. 



### 클라우드 서비스 모델 

> 제공업체와 이용 업체의 관계를 중심으로 관련 서비스를 나누는 것이 일반적입니다. 

* 퍼블릭 클라우드 
  * 비용만 지불하면 누구나 사용할 수 있는 클라우드로 별도의 서비스 제공 업체가 구축합니다. 
  * 퍼블릭 클라우드 사업자는 사용자들에게 인프라 작업권한을 부여하지 않으므로 보안 정책 변경 작업을 직접 수행하는 것이 거의 불가능합니다. 
  * 따라서 보안 강화조치가 제한적이므로 퍼블릭 클라우드를 통해서 서비스를 운영할 때는 법적 제재를 받을 수 있습니다. 
  * '인프라 구축 및 제공 업체'와 '서비스 구축 및 제공 업체'가 다르기 때문에 고객 정보가 필요한 사업을 진행하기 위해서는 고객정보 동의가 추가적으로 필요합니다. 
* 프라이빗 클라우드 
  * 정부나 대기업들이 자체적인 클라우드 센터를 만들고 사용하는 형태입니다. 
* 커뮤니티 클라우드 
  * 정부와 같이 매우 큰 조직은 하나의 클라우드 센터로 대응하기 어렵기 때문에 각 서비스별 클라우드로 분산하여 운영하는 방식을 말합니다. 



### 클라우드 전환 주의사항 

* 클라우드는 기존의 온 프레미스 서버 구축 역량과는 다른 기술력이 필요하기 때문에, 제대로 구축 및 운영하기 위해서는 전문 인력과 기술역량을 습득하고 축적해야 합니다. 
* 이러한 준비 없이 진행할 경우 현실에 적합하지 않은 부분이 발견되고, 이를 해결하기 위한 추가 비용이 계속해서 들어가기 때문에 유지보수가 상당히 난해하게 됩니다. 



### 클라우드와 개발 

* 기존 모놀리식 개발환경은 극변하는 클라우드와 개발환경에서는 적합하지 않기 때문에 지향해야 합니다. 

* 개발 형태적 측면에서는 MSA(Micro Service Architecture)가 적용되야 합니다. 

  * 프로그램을 업무단위로 쪼개서 개발하며, 각 프로그램별 호출이 꼭 필요할 경우 MQ(Message Queue)나 REST API를 활용하여 상호 의존성을 최소화 시켜 클라우드의 기민성을 최대한 이용하여 비용을 최소화 할 수 있습니다. 

* 개발 방법론에서는 애자일 방법론이 필요합니다. 

  * 완성된 서비스의 모습을 기획 및 설계 단계에서 모두 정의하고 시작하는 것이 아니라 기본 기능의 프로토타입과 개발 이후의 다음 단계를 기능을 프로토타입하고 개발하는 형태를 반복함으로써 최종적으로 완성된 서비스의 형태를 가늠하기는 어렵고, 사용자의 수나 트래픽을 예측할 수 없기 때문에 클라우드의 비용 부과 방식과 어울리는 방식입니다. 
  * 애자일 방법론으로 개발하게 되면 완성되지 않은 상태에서 런칭하는 형태가 나타는데, 이렇게 서비스 운영과 개발을 동시에 진행하는 방식을 데브옵스(DevOps)라고 합니다.

* 클라우드 솔루션에서는 오픈소스로 제공 중인 오픈스택이 있으며, 아파치 재단에서 운영중인 클라우드 스택이 있습니다.  

  ![](http://docs.cloudstack.apache.org/projects/cloudstack-installation/en/4.6/_images/acslogo.png)

  ![](https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/OpenStack%C2%AE_Logo_2016.svg/470px-OpenStack%C2%AE_Logo_2016.svg.png)




### 오픈스택 

* 나사와 락스페이스가 오픈스택의 핵심이 되는 소스코드를 기부하면서 시작된 프로젝트로, 2010년 부터 6개월에 한번씩 새로운 버전이 릴리즈 됩니다. 

* 전 세계 500여 개 기업 15,000여명의 개발자가 이 프로젝트에 참가하고 있으며, KT 유클라우드가 오픈스택을 활용하여 구축한 사례가 있으며,  카카오톡이 현재 오픈스택을 활용하여 서비스를 운영하고 있습니다. 

  ![](https://www.ustack.com/wp-content/uploads/2016/04/xtgnuawahddcse9p2ooc.jpg)

  ![](https://www.ustack.com/wp-content/uploads/2016/04/xlkq6uqcfcv1uvjo0fcj.jpg)

* 오픈스택은 각 서비스들의 집합체로서 기존 인프라 기능들이 소프트웨어적으로 구성되어 있습니다. 이를 SDx(Software Defined Anything)라고 합니다. 

* 각 서버에 오픈스택을 설치하여 배치하게 되면, 가상머신, 네트워크 장비, 스토리지와 같은 역할들을 담당하게 됩니다. 

* 오픈스택은 약 9개의 서비스를 종합하여 사용하게 됩니다. 

  ![](https://rockplace.co.kr/rockplace/common/img/img/openstack-img02.jpg)



##### 호라이즌 

![](https://i.ytimg.com/vi/37m-1t0Pph8/maxresdefault.jpg)

* 호라이즌은 오픈스택에 설치된 모든 서비스들은 GUI로 제어할 수 있는 환경으로, 호라이즌을 사용하지 않고 각 서비스를 CLI로 조작할 수 있으나, 수많은 서비스의 명령어를 완벽하게 사용하는 것이 쉽지 않기 때문에 호라이즌을 대부분 사용합니다. 



##### 노바 (Nova)

![](https://datadog-prod.imgix.net/img/blog/openstack-monitoring-nova/nova-high-level-3.png?fit=max)

* 가장 핵심이 되는 서비스로 VM을 생성/삭제/기동/종료하는 등의 역할을 담당합니다. 

* KVM, VMware, Xen 등의 하이퍼바이저 기술이나 리눅스 컨테이너 등을 제어하는 개념으로, 각 하이퍼바이저들은 VM들을 관리하기 위한 API를 사용하여 VM을 관리하게 됩니다. 

* Nova는 어떤 하이퍼바이저를 사용하는지에 관계 없이 수평적 확장을 위해 설계된 계념이기 때문에 하이퍼바이저를 그대로 사용하고 Nova를 추가적으로 사용하게 됩니다. 

* 파이썬 기반으로 작성되어 있기 때문에 하드웨어 이식성이 높으며, 레거시 시스템과 서드파티 제품들과 연동기능이 매우 강력합니다. 

  ![](https://robhirschfeld.files.wordpress.com/2011/05/kvm-vs-xen.png)

* 오픈스택에 가장 최적화된 하이퍼바이저는 QEMU(Quick EMUlator) 타입의 KVM(Kernel-based Virtual Machine) 입니다. 기본적으로 오픈스택과 기본적으로 같이 설치됩니다. 
* 단, 리눅스 커널을 하이퍼바이저로 변환하기 때문에 노바 클라이언트는 반드시 리눅스가 설치되어 있어야 합니다. 



##### 오브젝트 스토리지 스위프트, 네트워킹 서비스 뉴트론

![](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRK0-hQvdIeSTKEffy8-ZSkPO88hYCTZJwg0Nt8UvZw2ZmGx5VQ)

* 오픈스택은 스위프트에 VM이나 컨테이너 이미지를 저장해 두고 글랜스(Glance)를 통해 프로파일화 하여 호라이즌 GUI로제공합니다. 
* 오브젝트 스토리지란, 데이터를 저장하는 단위로서 동영상, 엑셀파일 등 하나의 오브젝트 단위입니다.
  * HDD와 같은 블록 스토리지에서는 실린더와 트랙을 이야기 하지만 오브젝트 스토리지는 REST API를 사용합니다. 

![](https://docs.openstack.org/security-guide/_images/1aa-network-domains-diagram.png)

* 뉴트론은 NFV(Network Function Virtualization)과 비슷한 개념으로, 수많은 네트워킹 기술을 소프트웨어 기반으로 구현되어 있습니다. 

* L1부터 L7까지 그리고 방화벽 등 네트워크 장비의 모든 기능을 수행하기 때문에 낮은 레이턴시가 요구되며, 구성하기 힘들고, 구성한 결과가 전체 클라우드의 영향을 미치게 됩니다. 

* 플러거블(pluggable) 아키텍쳐로서 호라이즌 대시보드에 포함된 네트워킹 서비스에 L3를 꽂기만 하면 바로 L3 구축이 완료됩니다. 

  * 이를 통해 별도의 네트워킹 장비를 구매하지 않고 클라우드 환경 내에서 모든 기능을 사용할 수 있습니다. 


##### 인증 서비스 키스톤, 오케스트레이션 서비스 히트 

* 키스톤(keystone)은 사용자와 권환을 인증 받은 것을 다른 서비스들에서 인증할 수 있는 URL을 만듭니다. 
* 토큰을 통해서 한번 인증 받은 것은 다시 인증받지 않아도됩니다. 토큰에는 유효기간이 있으며 유효기간이 지나면 다시 발급받게 됩니다. 
* 초반에 키스톤이 없는 상태에서 인증 기능이 추가되면서 인증에 대한 부하가 심해지게 되었고 이를 해결하기 위해서 키스톤이 만들어 지게 되었습니다. 
* 오픈스택의 모든 서비스는 REST API를 제공합니다. 따라서 오케스트레이션 서비스인 히트(Heat)를 사용하여 각각의 서비스에 일괄된 명령어 집합을 한 번에 전송함으로서 손쉽게 VM을 관리할 수 있도록 합니다. 



##### 신더(Cinder)

* 리눅스는 LVM(Logical Volume Manager)이라는 저장 관리 솔루션을 사용합니다. 신더는 LV(Logical Volume) 단위로 iSCSI 프로토콜을 사용하여 각 VM의 블록 디바이스를 제공하게 되어 서버 내부 스토리지 뿐만 아니라, 리눅스에서 인식 가능한 모든 스토리지를 활용할 수 있습니다. 



### 오픈스택에 적합한 OS 

* 우분투(Ubuntu)의 경우 오픈스택을 가장 열심히 지원하는 리눅스 배포판입니다. 

* 2015년 LXD라는 이름으로 오픈스택의 노바 클라이언트가 제어할 수 있는 컨테이너 기술을 포함하였습니다. 

* 우분투는 오픈스택에 가장 최적화된 플랫폼을 제공하겠다고 선언하고 현재도 기술 개발을 꾸준히 진행하고 있습니다. 

  ![](https://assets.ubuntu.com/v1/a7916513-picto-openstack.svg)

  ![](http://ronaldbradford.com/images/blog/ubuntu-openstack-09.png)

* 오픈스택을 사용하는 곳은 대기업 또는 정부기관인데 이러한 곳은 보수적이며, 문제 발생시 기술지원을 받아야 하는 이유로 인해서 국내에서는 레드햇 RHEL이 가장 많이 보급 되어 있으며, CentOS 위에 설치하는 경우도 많습니다. 

  ![](https://regmedia.co.uk/2012/06/21/red_hat_logo.png?x=442&y=293&crop=1)

  ![](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux_OpenStack_Platform/5/html-single/Installer_and_Foreman_Guide/images/5684.png)



